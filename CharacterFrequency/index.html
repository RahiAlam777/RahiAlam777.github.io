<!DOCTYPE html>
<html>

<head>
<link rel="stylesheet" type="text/css" href="css.css">
</head>

<body>

    <h1>Character Frequency Counter</h1>

    <form>
        <div> 
            <p class="boxtitle">Text Box</p> 
            <textarea id="inputbox" rows="28" cols="100" name="inputbox" placeholder="Enter text here!"></textarea>
        </div>

        <div class="detailsbox">
            <p class="boxtitle">Output</p> 
            <textarea id="outputbox" rows="28" name="outputbox" readonly placeholder="letter:frequency"></textarea>
        </div>
    </form>
    
    <p class="boxtitleother">Other Details</p> 

    <textarea id="detailsbox" rows="2" cols="82" name="detailsbox" readonly></textarea>

    <button onclick="main()">Calculate</button><br><br>


<script>

    function main() {

        var text = document.getElementById("inputbox").value.trim();
        var chars = text.split("");
        var key;
        var dict = {};
        var totalletters = 0;
          
        for (i = 0; i < chars.length; i++){
            key = getKey(chars[i].toLowerCase());
            if (dict[key] == undefined)
                dict[key] = 1;
            else
                dict[key] += 1;
        }

        var outputstring = getOutputString(dict, totalletters);
          
        if (outputstring == "")
            document.getElementById("outputbox").value = "No alphabetical characters found!";
        else
            document.getElementById("outputbox").value = outputstring;

        printOtherDetails(text, chars, totalletters, dict);
    }

    function getKey(ch) {
        return ch.charCodeAt(0);
    }

    function getOutputString(dict, totalletters) {
        var output = "";
        for (i = 97; i <= 122; i++){
            if (dict[i] != undefined){
                output += String.fromCharCode(i) + ":" + dict[i] + "\n";
                totalletters += dict[i];
            }
        }
        return output;
    }

    function getTotalChars(chars) {
        return chars.length;
    }

    function getTotalWords(text){
        if (text.length == 0)
            return 0;
        var totalwords = text.trim().split(/\s+/);
        return totalwords.length;
    }

    function getMostFrequentLetter(dict){
        var highest = 0;
        var letter = "none";
        for (i = 97; i <= 122; i++){
            if (dict[i] != undefined && dict[i] > highest){
                highest = dict[i];
                letter = String.fromCharCode(i);
            }
        }
        return letter;
    }

    function printOtherDetails(text, chars, totalletters, dict){
        var details = "";
        var letter = getMostFrequentLetter(dict);
        
        details += "Total Words: " + getTotalWords(text) + ", ";
        details += "Total Characters: " + getTotalChars(chars) + ", ";
        details += "Total Letters: " + totalletters + ",\n";

        if(letter != "none")
            details += "Most Frequent letter: " + letter + " (" + dict[getKey(letter)] + " times).";

        document.getElementById("detailsbox").value = details;
    }

</script>

</body>
</html>
